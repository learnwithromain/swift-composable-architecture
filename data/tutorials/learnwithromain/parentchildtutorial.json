{"variants":[{"paths":["\/tutorials\/learnwithromain\/parentchildtutorial"],"traits":[{"interfaceLanguage":"swift"}]}],"hierarchy":{"reference":"doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/RefineComposableArchitecture","modules":[{"reference":"doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/RefineComposableArchitecture\/Composing-features","projects":[{"reference":"doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/learnwithromain\/ParentChildTutorial","sections":[{"reference":"doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/learnwithromain\/ParentChildTutorial#Creating-a-parent-view-with-a-child-view","kind":"task"},{"kind":"task","reference":"doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/learnwithromain\/ParentChildTutorial#Child-%3E-Parent-communication"},{"kind":"task","reference":"doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/learnwithromain\/ParentChildTutorial#Parent-%3E-Child-communication"}]}]}],"paths":[["doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/RefineComposableArchitecture","doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/RefineComposableArchitecture\/$volume","doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/RefineComposableArchitecture\/Composing-features"]]},"sections":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Parent-child communication refers to the exchange of information or triggering of actions between hierarchical views."}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"The parent state consists of its own values and the child state."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"The Store of the Child is a scoped variant of the parent.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"The parent reducer will receive every action sent by the child reducer."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"The parent can modify the state of the child.","type":"text"}],"type":"paragraph"}]}]}],"kind":"hero","title":"Building a Parent-Child Relationship","chapter":"Composing features","estimatedTimeInMinutes":30},{"tasks":[{"title":"Creating a parent view with a child view","stepsSection":[{"caption":[{"name":"Note","type":"aside","content":[{"type":"paragraph","inlineContent":[{"text":"Since TCA 1.8, @Reducer macro automatically fulfills the reducer requirements. Our body does not have any logic, so we can omit it.","type":"text"}]}],"style":"note"}],"runtimePreview":null,"type":"step","code":"01-01-01-code0001.swift","media":null,"content":[{"inlineContent":[{"type":"text","text":"Create a new file called ChildFeature.swift with some basic scaffolding in place. This feature has a minus and plus button with a number that specify its current value."}],"type":"paragraph"}]},{"type":"step","code":"01-01-01-code0002.swift","runtimePreview":null,"media":null,"content":[{"inlineContent":[{"text":"Create a new file called ParentFeature.swift with some basic scaffolding in place.","type":"text"}],"type":"paragraph"}],"caption":[{"style":"note","type":"aside","content":[{"type":"paragraph","inlineContent":[{"text":"Since TCA 1.8, @Reducer macro automatically fulfills the reducer requirements.","type":"text"}]}],"name":"Note"}]}],"anchor":"Creating-a-parent-view-with-a-child-view","contentSection":[{"mediaPosition":"trailing","kind":"contentAndMedia","content":[{"type":"paragraph","inlineContent":[{"text":"the terms “parent” and “child” are often used to describe the relationship between different components or modules within an app. Feature composition refers to the practice of building complex functionality by combining smaller, more manageable features.","type":"text"}]}]}]},{"contentSection":[{"content":[{"type":"paragraph","inlineContent":[{"text":"the terms “parent” and “child” are often used to describe the relationship between different components or modules within an app. Feature composition refers to the practice of building complex functionality by combining smaller, more manageable features.","type":"text"}]}],"mediaPosition":"trailing","kind":"contentAndMedia"}],"title":"Child -> Parent communication","anchor":"Child->-Parent-communication","stepsSection":[{"inlineContent":[{"type":"text","text":"Let’s compose the features together at the reducer level."}],"type":"paragraph"},{"code":"01-01-02-code0001.swift","media":null,"caption":[],"runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"Add a State and Action to the reducer. The parent reducer will hold the state and actions of the Child reducer."}],"type":"paragraph"}],"type":"step"},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Next we need to implement the body of the reducer. Previously it was empty because we had no actions. To compose the child reducer in the parent reducer, we can use the Scope reducer. It allows you to focus in on a sub-domain of the parent feature, and run a child reducer on that sub-domain."}]}],"type":"step","code":"01-01-02-code0002.swift","runtimePreview":null,"caption":[{"type":"aside","style":"note","name":"Note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"It exposes child state and action to the parent reducer."}]}]}],"media":null},{"type":"paragraph","inlineContent":[{"type":"text","text":"Let’s compose the features together at the view level."}]},{"caption":[],"content":[{"inlineContent":[{"text":"Use the scope(state:action:) method on Store to derive a child store focused in on just the child domain.","type":"text"}],"type":"paragraph"}],"media":null,"type":"step","code":"01-01-02-code0003.swift","runtimePreview":null},{"inlineContent":[{"text":"If the parent needs to respond to events in the child, it can simply listen to the corresponding actions that arrive in the reducer.","type":"text"}],"type":"paragraph"},{"media":null,"runtimePreview":null,"code":"01-01-02-code0004.swift","caption":[{"type":"aside","style":"note","content":[{"inlineContent":[{"text":"This is possible thanks to Scope reducer","type":"text"}],"type":"paragraph"}],"name":"Note"}],"type":"step","content":[{"inlineContent":[{"type":"text","text":"We just need to add an action to listen to from the child reducer."}],"type":"paragraph"}]},{"inlineContent":[{"type":"text","text":"If there is a need to update the childs state from the parent, it can get easily down by just changing the value in the reducer."}],"type":"paragraph"},{"code":"01-01-02-code0005.swift","runtimePreview":null,"media":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"We react to the child action from the parent reducer and update the state of the child."}]}],"caption":[]}]},{"stepsSection":[{"inlineContent":[{"type":"text","text":"To send an action from the parent to the child, we need to create an extension on the child state. You can even use dependencies directly in those functions."}],"type":"paragraph"},{"media":null,"code":"01-01-03-code0001.swift","type":"step","runtimePreview":null,"caption":[{"name":"Note","style":"note","type":"aside","content":[{"type":"paragraph","inlineContent":[{"text":"If you only use the update() method within a reducer, it will correctly use the necessary dependencies. However, if you call this method outside of a reducer, the dependencies will return to their default values. Alternatively, you can pass the dependency explicitly to the update method for added clarity.","type":"text"}]}]}],"content":[{"inlineContent":[{"type":"text","text":"We create an extension on the child state in order to update the child state."}],"type":"paragraph"}]},{"code":"01-01-03-code0002.swift","caption":[],"runtimePreview":null,"type":"step","content":[],"media":null}],"title":"Parent -> Child communication","anchor":"Parent->-Child-communication","contentSection":[{"content":[],"kind":"contentAndMedia","mediaPosition":"trailing"}]}],"kind":"tasks"}],"schemaVersion":{"minor":3,"major":0,"patch":0},"metadata":{"category":"The Composable Architecture","categoryPathComponent":"RefineComposableArchitecture","role":"project","title":"Building a Parent-Child Relationship"},"kind":"project","identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/learnwithromain\/ParentChildTutorial"},"references":{"doc://com.learnwithromain.learnwithromain/tutorials/learnwithromain/ParentChildTutorial#Creating-a-parent-view-with-a-child-view":{"abstract":[{"type":"text","text":"Parent-child communication refers to the exchange of information or triggering of actions between hierarchical views."}],"type":"section","identifier":"doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/learnwithromain\/ParentChildTutorial#Creating-a-parent-view-with-a-child-view","title":"Creating a parent view with a child view","kind":"section","url":"\/tutorials\/learnwithromain\/parentchildtutorial#Creating-a-parent-view-with-a-child-view","role":"pseudoSymbol"},"01-01-03-code0001.swift":{"fileType":"swift","type":"file","content":["extension Child.State {","    mutating func updateNumber(with number: Int) -> Effect<Child.Action> {","        state.number = number","        return .none","    }","}"],"fileName":"ParentFeature.swift","identifier":"01-01-03-code0001.swift","highlights":[],"syntax":"swift"},"doc://com.learnwithromain.learnwithromain/tutorials/learnwithromain/ParentChildTutorial":{"type":"topic","title":"Building a Parent-Child Relationship","url":"\/tutorials\/learnwithromain\/parentchildtutorial","role":"project","abstract":[{"type":"text","text":"Parent-child communication refers to the exchange of information or triggering of actions between hierarchical views."}],"kind":"project","identifier":"doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/learnwithromain\/ParentChildTutorial","estimatedTime":"30min"},"01-01-02-code0005.swift":{"fileType":"swift","type":"file","content":["import ComposableArchitecture","import SwiftUI","","@Reducer","struct ParentFeature {","    @ObservableState","    struct State {","        var child: ChildFeature.State","    }","    ","    enum Action {","        case child(ChildFeature.Action)","    }","    ","    var body: some ReducerOf<Self> {","        Scope(state: \\.child, action: \\.child) {","            ChildFeature()","        }","        ","        Reduce { state, action in","            switch action {","            case .child(.plusButtonTapped):","                state.child.number += 1","                return .none","            }","        }","    }","}","","struct ParentView: View {","    let store: StoreOf<ParentFeature>","    ","    var body: some View {","        VStack {","            ChildView(store: store.scope(","                state: \\.child,","                action: \\.child","            ))","        }","    }","}",""],"fileName":"ParentFeature.swift","identifier":"01-01-02-code0005.swift","highlights":[{"line":23}],"syntax":"swift"},"01-01-01-code0001.swift":{"fileType":"swift","type":"file","content":["import ComposableArchitecture","import SwiftUI","","@Reducer","struct ChildFeature {","    @Observable","    struct State {","        var number: Int","    }","    ","    enum Action {","        case minusButtonTapped","        case plusButtonTapped","    }","}","","struct ChildView: View {","    let store: StoreOf<ChildFeature>","    ","    var body: some View {","        HStack {","            Button(\"-\") {","                send(.minusButtonTapped)","            }","            Text(String(store.number))","            Button(\"+\") {","                send(.plusButtonTapped)","            }","        }","    }","}"],"fileName":"ChildFeature.swift","identifier":"01-01-01-code0001.swift","highlights":[],"syntax":"swift"},"doc://com.learnwithromain.learnwithromain/tutorials/RefineComposableArchitecture/Composing-features":{"abstract":[],"type":"topic","identifier":"doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/RefineComposableArchitecture\/Composing-features","role":"article","kind":"article","url":"\/tutorials\/refinecomposablearchitecture\/composing-features","title":"Composing features"},"doc://com.learnwithromain.learnwithromain/tutorials/RefineComposableArchitecture":{"type":"topic","title":"Refine the Composable Architecture","url":"\/tutorials\/refinecomposablearchitecture","role":"overview","abstract":[{"type":"text","text":"Updated with TCA 1.8"}],"kind":"overview","identifier":"doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/RefineComposableArchitecture"},"doc://com.learnwithromain.learnwithromain/tutorials/learnwithromain/ParentChildTutorial#Parent-%3E-Child-communication":{"abstract":[{"type":"text","text":"Parent-child communication refers to the exchange of information or triggering of actions between hierarchical views."}],"type":"section","identifier":"doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/learnwithromain\/ParentChildTutorial#Parent-%3E-Child-communication","role":"pseudoSymbol","kind":"section","url":"\/tutorials\/learnwithromain\/parentchildtutorial#Parent-%253E-Child-communication","title":"Parent -> Child communication"},"01-01-02-code0004.swift":{"fileType":"swift","type":"file","content":["import ComposableArchitecture","import SwiftUI","","@Reducer","struct ParentFeature {","    @ObservableState","    struct State {","        var child: ChildFeature.State","    }","    ","    enum Action {","        case child(ChildFeature.Action)","    }","    ","    var body: some ReducerOf<Self> {","        Scope(state: \\.child, action: \\.child) {","            ChildFeature()","        }","        ","        Reduce { state, action in","            switch action {","            case .child(.plusButtonTapped):","                \/\/ We listen to the buttonTapped child action","                return .none","            }","        }","    }","}","","struct ParentView: View {","    let store: StoreOf<ParentFeature>","    ","    var body: some View {","        VStack {","            ChildView(store: store.scope(","                state: \\.child,","                action: \\.child","            ))","        }","    }","}",""],"fileName":"ParentFeature.swift","identifier":"01-01-02-code0004.swift","highlights":[{"line":21},{"line":22},{"line":23},{"line":24},{"line":25}],"syntax":"swift"},"01-01-03-code0002.swift":{"identifier":"01-01-03-code0002.swift","highlights":[{"line":1},{"line":2},{"line":3},{"line":4},{"line":5},{"line":6},{"line":7},{"line":8},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":36},{"line":37},{"line":38},{"line":39},{"line":40},{"line":41},{"line":42},{"line":43}],"syntax":"swift","fileType":"swift","content":["import ComposableArchitecture","import SwiftUI","","@Reducer","struct ParentFeature {","    @ObservableState","    struct State {","        var child: ChildFeature.State","    }","    ","    enum Action {","        case child(ChildFeature.Action)","    }","    ","    var body: some ReducerOf<Self> {","        Scope(state: \\.child, action: \\.child) {","            ChildFeature()","        }","        ","        Reduce { state, action in","            switch action {","            case .child(.plusButtonTapped):","                let newNumber = state.child.number + 1","                return state.child.updateNumber(with: newNumber).map(Action.child)","                return .none","            }","        }","    }","}","","struct ParentView: View {","    let store: StoreOf<ParentFeature>","    ","    var body: some View {","        VStack {","            ChildView(store: store.scope(","                state: \\.child,","                action: \\.child","            ))","        }","    }","}",""],"fileName":"ParentFeature.swift","type":"file"},"01-01-02-code0001.swift":{"fileType":"swift","type":"file","content":["import ComposableArchitecture","import SwiftUI","","@Reducer","struct ParentFeature {","    @ObservableState","    struct State {","        var child: ChildFeature.State","    }","    ","    enum Action {","        case child(ChildFeature.Action)","    }","    ","    var body: some ReducerOf<Self> {","        Reduce { state, action in","            \/\/ Core logic of the app feature","            return .none","        }","    }","}","","struct ParentView: View {","    let store: StoreOf<ParentFeature>","    ","    var body: some View {","        EmptyView()","    }","}",""],"fileName":"ParentFeature.swift","identifier":"01-01-02-code0001.swift","highlights":[],"syntax":"swift"},"doc://com.learnwithromain.learnwithromain/tutorials/learnwithromain/ParentChildTutorial#Child-%3E-Parent-communication":{"abstract":[{"type":"text","text":"Parent-child communication refers to the exchange of information or triggering of actions between hierarchical views."}],"type":"section","identifier":"doc:\/\/com.learnwithromain.learnwithromain\/tutorials\/learnwithromain\/ParentChildTutorial#Child-%3E-Parent-communication","role":"pseudoSymbol","kind":"section","url":"\/tutorials\/learnwithromain\/parentchildtutorial#Child-%253E-Parent-communication","title":"Child -> Parent communication"},"01-01-01-code0002.swift":{"fileName":"ParentFeature.swift","fileType":"swift","content":["import ComposableArchitecture","import SwiftUI","","@Reducer","struct ParentFeature {}","","struct ParentView: View {","    let store: StoreOf<ParentFeature>","    ","    var body: some View {","        EmptyView()","    }","}",""],"highlights":[],"type":"file","syntax":"swift","identifier":"01-01-01-code0002.swift"},"01-01-02-code0002.swift":{"fileType":"swift","type":"file","content":["import ComposableArchitecture","import SwiftUI","","@Reducer","struct ParentFeature {","    @ObservableState","    struct State {","        var child: ChildFeature.State","    }","    ","    enum Action {","        case child(ChildFeature.Action)","    }","    ","    var body: some ReducerOf<Self> {","        Scope(state: \\.child, action: \\.child) {","            ChildFeature()","        }","        ","        Reduce { state, action in","            \/\/ Core logic of the app feature","            return .none","        }","    }","}","","struct ParentView: View {","    let store: StoreOf<ParentFeature>","    ","    var body: some View {","        EmptyView()","    }","}",""],"fileName":"ParentFeature.swift","identifier":"01-01-02-code0002.swift","highlights":[{"line":16},{"line":17},{"line":18},{"line":19}],"syntax":"swift"},"01-01-02-code0003.swift":{"fileType":"swift","type":"file","content":["import ComposableArchitecture","import SwiftUI","","@Reducer","struct ParentFeature {","    @ObservableState","    struct State {","        var child: ChildFeature.State","    }","    ","    enum Action {","        case child(ChildFeature.Action)","    }","    ","    var body: some ReducerOf<Self> {","        Scope(state: \\.child, action: \\.child) {","            ChildFeature()","        }","        ","        Reduce { state, action in","            \/\/ Core logic of the app feature","            return .none","        }","    }","}","","struct ParentView: View {","    let store: StoreOf<ParentFeature>","    ","    var body: some View {","        VStack {","            ChildView(store: store.scope(","                state: \\.child,","                action: \\.child","            ))","        }","    }","}",""],"fileName":"ParentFeature.swift","identifier":"01-01-02-code0003.swift","highlights":[{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":36}],"syntax":"swift"}}}